---
title: "JDAã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®š"
emoji: "ğŸ”ƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["jda", "kotlin", "java", "å‚™å¿˜éŒ²"]
published: true
---

## ã¯ã˜ã‚ã«

Zenn åˆæŠ•ç¨¿ã®ãˆã‚ã•ã‚“ã§ã™ã€‚
JDA ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã™ã‚‹æ–¹æ³•ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸãŸã‚ã€è‡ªåˆ†ã®å‚™å¿˜éŒ²ç”¨ã«è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚  
ã“ã®ã‚ˆã†ãªè¨˜äº‹ã‚’æ›¸ãã“ã¨ã¯åˆã‚ã¦ãªã®ã§ã€è‡³ã‚‰ãªã„ç‚¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚

## ç’°å¢ƒ

Kotlin 1.9.22 ã§æ›¸ã„ã¦ã„ã¾ã™ãŒã€Java ã§ã‚‚åŒã˜ã‚ˆã†ã«å®Ÿè£…ã§ãã¾ã™ã€‚  
Bot ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ JDA 5.0.0_Beta19 ã§ã™ã€‚

## ä½¿ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

JDA ã® JavaDoc ã‚’è¦‹ã¦ã„ã‚‹ã¨ã€`MessageReceivedEvent`ã‚¯ãƒ©ã‚¹ã«`getInteraction()`ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
https://ci.dv8tion.net/job/JDA5/javadoc/net/dv8tion/jda/api/entities/Message.html#getInteraction()

> This is sent on the message object when the message is a response to an Interaction without an existing message.
> This means responses to Message Components do not include this property, instead including a message reference object as components always exist on preexisting messages.

ãã—ã¦ã€ã“ã® getInteraction()ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®`getUser()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
https://ci.dv8tion.net/job/JDA5/javadoc/net/dv8tion/jda/api/interactions/Interaction.html#getUser()

> The User who caused this interaction.

å®Ÿè£…ã—ã¦ã¿ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

Java

```java

static void onMessageReceived(MessageReceivedEvent event) {
    User user = event.getInteraction().getUser();
    // ã“ã“ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã§ãã‚‹
}
```

Kotlin

```kotlin
fun onMessageReceived(event: MessageReceivedEvent) {
    val user = event.interaction.user
    // ã“ã“ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã§ãã‚‹
}
```

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å…¨æ–‡

Java

```java:Main.java
import net.dv8tion.jda.api.JDABuilder;
import net.dv8tion.jda.api.entities.User;
import net.dv8tion.jda.api.events.interaction.MessageReceivedEvent;
import net.dv8tion.jda.api.hooks.ListenerAdapter;

public class Main extends ListenerAdapter {
    public static void main(String[] args) throws Exception {
        JDABuilder.createDefault("token", GatewayIntent.GUILD_MESSAGES)
                .addEventListeners(new Main())
                .build();
    }

    @Override
    public void onMessageReceived(MessageReceivedEvent event) {
        User user = event.getInteraction().getUser();
        // ã“ã“ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã§ãã‚‹
    }
}
```

Kotlin

```kotlin:Main.kt
import net.dv8tion.jda.api.JDABuilder
import net.dv8tion.jda.api.events.interaction.MessageReceivedEvent
import net.dv8tion.jda.api.hooks.ListenerAdapter

class Main : ListenerAdapter() {
    override fun onMessageReceived(event: MessageReceivedEvent) {
        val user = event.interaction.user
        // ã“ã“ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã§ãã‚‹
    }
}

fun main() {
    JDABuilder.createDefault("token", GatewayIntent.GUILD_MESSAGES)
        .addEventListeners(Main())
        .build()
}
```

## ã‚ã¨ãŒã

Discord ã® Bump ãªã©ã§ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œè€…ã‚’ç‰¹å®šã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ã€èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚

ã“ã‚“ãªè¨˜äº‹ã§ã™ãŒã€èª°ã‹ã®ãŠå½¹ã«ç«‹ã¦ã‚Œã°å¹¸ã„ã§ã™ã€‚
